# การปรับปรุงระบบการแสดงคะแนน

## ภาพรวม
ปรับปรุงระบบการแสดงคะแนนให้แสดงคะแนนจริงเฉพาะเมื่อผ่านเงื่อนไขและปลดล็อคปุ่มรีเซ็ตแล้ว

## การเปลี่ยนแปลงที่ทำ

### 1. ปรับปรุงการแสดงคะแนนในวิชาคอมพิวเตอร์ (`computertech_page.dart`)
- เพิ่ม parameter `allLessonsCompleted` ใน `_LessonCard`
- แสดงคะแนนจริงเฉพาะเมื่อ `scores!['isCompleted'] == true && allLessonsCompleted`
- หากยังไม่ผ่านเงื่อนไข จะแสดง `??/${scores!['total']}`

### 2. ปรับปรุงการแสดงคะแนนในวิชาอิเล็กทรอนิกส์ (`electronics_page.dart`)
- เพิ่ม parameter `allLessonsCompleted` ใน `_LessonCard`
- แสดงคะแนนจริงเฉพาะเมื่อ `scores!['isCompleted'] == true && allLessonsCompleted`
- หากยังไม่ผ่านเงื่อนไข จะแสดง `??/${scores!['total']}`

### 3. ปรับปรุงการแสดงคะแนนประจำด่านในวิชาคอมพิวเตอร์ (`computer_lesson_map_page.dart`)
- เพิ่ม parameter `allLessonsCompleted` ใน `_HexStackBadge`
- แสดงคะแนนจริงเฉพาะเมื่อ `completed && allLessonsCompleted`
- หากยังไม่ผ่านเงื่อนไข จะแสดง `??/${stageScore!['total'] ?? 0}`

### 4. ปรับปรุงการแสดงคะแนนประจำด่านในวิชาอิเล็กทรอนิกส์ (`electronics_lesson_map_page.dart`)
- เพิ่ม parameter `allLessonsCompleted` ใน `_HexStackBadge`
- แสดงคะแนนจริงเฉพาะเมื่อ `completed && allLessonsCompleted`
- หากยังไม่ผ่านเงื่อนไข จะแสดง `??/${stageScore!['total'] ?? 0}`

## เงื่อนไขการแสดงคะแนน

### แสดงคะแนนจริงเมื่อ:
1. บทเรียนนั้นเสร็จสมบูรณ์ (`isCompleted == true`)
2. ผ่านทุกบทเรียนในวิชานั้นแล้ว (`allLessonsCompleted == true`)
3. ปุ่มรีเซ็ตถูกปลดล็อคแล้ว

### แสดง `??/คะแนนเต็ม` เมื่อ:
1. บทเรียนยังไม่เสร็จสมบูรณ์ หรือ
2. ยังไม่ผ่านทุกบทเรียนในวิชานั้น หรือ
3. ปุ่มรีเซ็ตยังไม่ถูกปลดล็อค

## ตัวอย่างการทำงาน

### กรณีที่ 1: ยังไม่ผ่านทุกบทเรียน
- **หน้าหลัก**: แสดง `??/35`, `??/45`, `??/35` (ปุ่มรีเซ็ตไม่แสดง)
- **คะแนนประจำด่าน**: แสดง `??/คะแนนเต็ม` สำหรับทุกด่าน

### กรณีที่ 2: ผ่านทุกบทเรียนแล้ว
- **หน้าหลัก**: แสดงคะแนนจริง เช่น `ได้คะแนน 30/35` และปุ่มรีเซ็ตปรากฏ
- **คะแนนประจำด่าน**: แสดงคะแนนจริง เช่น `25/35` สำหรับแต่ละด่าน

## ไฟล์ที่แก้ไข
1. `lib/subject/computertech_page.dart`
2. `lib/subject/electronics_page.dart`
3. `lib/subject/computer_lesson_map_page.dart`
4. `lib/subject/electronics_lesson_map_page.dart`

## การทดสอบ
1. **เริ่มต้นใหม่** - ควรแสดง `??/คะแนนเต็ม` สำหรับทุกบทและทุกด่าน
2. **ผ่านบางบท** - ควรแสดง `??/คะแนนเต็ม` สำหรับบทและด่านที่ยังไม่ผ่าน
3. **ผ่านทุกบท** - ควรแสดงคะแนนจริงและปุ่มรีเซ็ต

## หมายเหตุ
- ระบบนี้ใช้ `LessonScoreService` และ `ProgressService` ในการตรวจสอบสถานะการเสร็จสิ้น
- การแสดงคะแนนจะอัปเดตแบบ real-time เมื่อสถานะเปลี่ยน
- รูปแบบการแสดง `??/คะแนนเต็ม` ช่วยให้ผู้ใช้เข้าใจว่าต้องผ่านเงื่อนไขก่อนจึงจะเห็นคะแนนจริง
- ระบบครอบคลุมทั้งคะแนนรวมของบทเรียนและคะแนนประจำด่าน
